?unlink
setwd("C:\\Users\\George\\R\\GetCleanData\\project")
#download zip file of data and unzip
dirURL <- "https://d396qusza40orc.cloudfront.net/getdata%2Fprojectfiles
%2FUCI%20HAR%20Dataset.zip"
temp <- tempfile()
download.file(dirURL, temp)
unzip(temp)  #places the unzipped directory in the working directory
unlink(temp) #deletes the zip file
#load train_X and train_y and column bind
trainX <- read.table("./UCI HAR Dataset/train/X_train.txt")
trainY <- read.table("./UCI HAR Dataset/train/y_train.txt")
train <- cbind(trainX,trainY)
#download feature file, extract names, add "activity", apply to train data.frame
features <- read.table("./UCI HAR Dataset/features.txt")
columnames <- as.vector(features[,2])
columnames[562] <- "activity"
colnames(train) <- columnames
#load train_X and train_y and column bind
testX <- read.table("./UCI HAR Dataset/test/X_test.txt")
testY <- read.table("./UCI HAR Dataset/test/y_test.txt")
test <- cbind(testX,testY)
#label columns of test data.frame
colnames(test) <- columnames
#join train and test data.frames and filter for mean and std variables
allData <- rbind(train,test)
columns <- grepl("[Mm]ean|std", as.character(features[,2]))
allData <- allData[,columns]
#relabel activity numbers to names
allData[allData$activity == 1, 87] <- "walking"
allData[allData$activity == 2, 87] <- "walking_upstairs"
allData[allData$activity == 3, 87] <- "walking_downstairs"
allData[allData$activity == 4, 87] <- "sitting"
allData[allData$activity == 5, 87] <- "standing"
allData[allData$activity == 6, 87] <- "laying"
#add subject column to dataset and name column
subjectTrain <- read.table("./UCI HAR Dataset/train/subject_train.txt")
subjectTest <- read.table("./UCI HAR Dataset/test/subject_test.txt")
subjectAll <- rbind(subjectTrain,subjectTest)
allData <- cbind(subjectAll,allData)
colnames(allData)[1] = "subject"
#sort dataset into subjects and activity
allData <- allData[order(allData$subject, allData$activity),]
#use package plyr to create table of means
library(plyr)
attach(allData)
#create table with 3 columns: subject, activity, and first
tidy <- ddply(allData, c("subject","activity"), function(df)mean(df[,2]))
for (i in 3:561){
temp <- ddply(allData, c("subject","activity"),
function(df)mean(df[,i]))
tidy <- cbind(tidy, temp[,3])
}
detach(allData)
columnames <- names(allData)[2:87]
colnames(tidy)[3:88] <- columnames
dim(allData)
tidy <- ddply(allData, c("subject","activity"), function(df)mean(df[,2]))
for (i in 3:88){
temp <- ddply(allData, c("subject","activity"),
function(df)mean(df[,i]))
tidy <- cbind(tidy, temp[,3])
}
warnings()
names(allData)
tidy <- ddply(allData, c("subject","activity"), function(df)mean(df[,2]))
for (i in 3:87){
temp <- ddply(allData, c("subject","activity"),
function(df)mean(df[,i]))
tidy <- cbind(tidy, temp[,3])
}
detach(allData)
?rm
ls()
attach(allData)
detach(allData)
names(allData)
attach(allData)
#create table with 3 columns: subject, activity, and mean of first data column
tidy <- ddply(allData, c("subject","activity"), function(df)mean(df[,2]))
#add means of the remaining columns
for (i in 3:87){
temp <- ddply(allData, c("subject","activity"),
function(df)mean(df[,i]))
tidy <- cbind(tidy, temp[,3])
}
detach(allData)
tidy[1:3,1:5]
